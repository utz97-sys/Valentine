<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Valentine ðŸ’˜</title>

<style>
  :root{
    --bg1:#ffe4e9;
    --bg2:#f7b7c3;
    --card: rgba(255,255,255,.94);
    --text:#1f2937;
    --accent:#ff4d6d;
    --accent2:#7c3aed;
    --shadow:0 18px 50px rgba(0,0,0,.18);
  }
  *{box-sizing:border-box}

  body{
    margin:0;
    min-height:100vh;
    font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    color:var(--text);
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    display:flex;
    align-items:center;
    justify-content:center;
    padding:16px;
    overflow:hidden;
  }

  .card{
    width:min(560px,96vw);
    background:var(--card);
    border-radius:32px;
    padding:22px 22px 26px;
    text-align:center;
    box-shadow:var(--shadow);
    display:flex;
    flex-direction:column;
    gap:12px;
    position:relative;
    overflow:hidden;
  }

  .badge{
    margin:0 auto;
    padding:8px 14px;
    border-radius:999px;
    font-size:14px;
    font-weight:600;
    background:rgba(255,255,255,.85);
    border:1px solid rgba(0,0,0,.06);
  }

  h1{
    margin:0;
    font-size:clamp(24px,4.8vw,42px);
    line-height:1.15;
    letter-spacing:-0.02em;
  }

  .sub{
    margin:0 auto;
    max-width:60ch;
    font-size:clamp(14px,2vw,16px);
    opacity:.85;
    line-height:1.45;
  }

  @keyframes yesPulse{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.035)}
  }

  .btnRow{
    display:flex;
    justify-content:center;
    gap:26px;
    height:82px;
    position:relative;
    margin-top:6px;
  }

  button{
    border:none;
    border-radius:999px;
    padding:13px 24px;
    font-size:17px;
    font-weight:750;
    cursor:pointer;
    box-shadow:0 10px 24px rgba(0,0,0,.15);
    -webkit-tap-highlight-color: transparent;
  }

  #yes{
    background:linear-gradient(135deg,#ff4d6d,#ff8fab);
    color:#fff;
    animation:yesPulse 1.3s infinite;
  }
  #no{
    background:#fff;
    border:1px solid rgba(0,0,0,.1);
  }

  .questionLine{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    flex-wrap:wrap;
  }
  #launchHeart{
    display:inline-block;
    transform-origin:center;
    filter: drop-shadow(0 8px 10px rgba(0,0,0,.12));
  }
  .heartWiggle{
    animation: heartWiggle .9s ease-in-out 2;
  }
  @keyframes heartWiggle{
    0%,100%{transform:scale(1) rotate(0deg)}
    25%{transform:scale(1.08) rotate(-8deg)}
    50%{transform:scale(1.1) rotate(8deg)}
    75%{transform:scale(1.08) rotate(-6deg)}
  }

  .page{display:none;}
  .page.active{display:block;}

  .inviteWrap{
    display:flex;
    flex-direction:column;
    gap:10px;
    align-items:center;
  }

  #winTitle{
    font-weight:950;
    text-shadow:
      0 0 10px rgba(255,77,109,.30),
      0 0 24px rgba(124,58,237,.20);
  }

  .photoWrap{
    margin:6px 0 10px;
    width:min(280px,78%);
    border-radius:18px;
    overflow:hidden;
    border:2px solid rgba(255,255,255,.95);
    box-shadow:0 12px 28px rgba(0,0,0,.20);
    background:#fff;
  }
  .photoWrap img{
    width:100%;
    height:auto;
    display:block;
  }
  .photoHint{
    font-size:12.5px;
    opacity:.65;
    margin-top:-2px;
  }

  .success{
    width:100%;
    padding:14px 14px;
    border-radius:18px;
    background:rgba(124,58,237,.08);
    border:1px solid rgba(124,58,237,.2);
  }
  .inviteLine{
    font-weight:900;
    color:var(--accent2);
    font-size:clamp(14px,2.3vw,18px);
    line-height:1.35;
    margin:0 0 6px;
  }
  .success p{
    margin:0;
    font-weight:800;
    line-height:1.4;
  }

  /* --- Cutscene overlay --- */
  .cutscene{
    position:absolute;
    inset:0;
    display:none;
    place-items:center;
    z-index:20;
    pointer-events:none;
  }
  .cutscene.show{display:grid;}

  .cutsceneBackdrop{
    position:absolute;
    inset:0;
    background: radial-gradient(circle at 50% 30%, rgba(255,255,255,.18), rgba(0,0,0,.18));
    opacity:0;
    animation: fadeIn 650ms ease forwards;
  }
  @keyframes fadeIn{ to{opacity:1;} }

  .arrowLayer{ position:absolute; inset:0; }
  .arrowSvg{ width:100%; height:100%; overflow:visible; }
  #arrowGroup{ opacity:0; transform-origin: 0 0; }

  /* âœ… SLOWER arrow */
  .arrowFly #arrowGroup{
    opacity:1;
    animation: arrowFly 1600ms cubic-bezier(.2,.8,.2,1) forwards;
  }
  @keyframes arrowFly{
    0%{
      transform: translate(var(--ax0), var(--ay0)) scale(.55) rotate(-12deg);
      filter: drop-shadow(0 4px 6px rgba(0,0,0,.15));
    }
    70%{
      transform: translate(var(--ax1), var(--ay1)) scale(1.15) rotate(10deg);
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.22));
      opacity:1;
    }
    100%{
      transform: translate(var(--ax2), var(--ay2)) scale(2.2) rotate(18deg);
      opacity:0;
      filter: drop-shadow(0 16px 26px rgba(0,0,0,.25));
    }
  }

  .envelopeStage{
    position:relative;
    width:min(340px,78vw);
    height:230px;
    display:grid;
    place-items:center;
    transform: translateY(16px) scale(.92);
    opacity:0;
  }
  /* âœ… Slower envelope pop */
  .showEnvelope .envelopeStage{
    opacity:1;
    animation: envPop 900ms ease forwards;
  }
  @keyframes envPop{
    from{transform: translateY(18px) scale(.90);}
    to{transform: translateY(0) scale(1);}
  }

  .envelope{
    position:relative;
    width:100%;
    height:210px;
    border-radius:18px;
    background: rgba(255,255,255,.97);
    box-shadow: 0 22px 55px rgba(0,0,0,.22);
    border:1px solid rgba(0,0,0,.08);
    overflow:hidden;
  }

  .flap{
    position:absolute;
    left:0; right:0;
    top:-6px;
    height:130px;
    background: linear-gradient(180deg, rgba(255,230,236,.98), rgba(255,255,255,.98));
    clip-path: polygon(0 0, 100% 0, 50% 88%);
    transform-origin: 50% 0%;
    transform: rotateX(0deg);
    z-index:3;
  }
  .envBody{
    position:absolute;
    inset:0;
    background: linear-gradient(180deg, rgba(255,255,255,.97), rgba(255,240,245,.97));
    z-index:1;
  }

  .seal{
    position:absolute;
    left:50%;
    top:98px;
    width:58px;
    height:58px;
    transform:translateX(-50%);
    border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #ff9fb0, #ff4d6d);
    box-shadow: 0 12px 22px rgba(0,0,0,.18);
    display:grid;
    place-items:center;
    z-index:4;
  }
  .seal span{ font-size:22px; }

  .letter{
    position:absolute;
    left:50%;
    bottom:-12px;
    width:86%;
    height:150px;
    transform: translateX(-50%) translateY(140px);
    border-radius:16px;
    background: rgba(255,255,255,.99);
    border:1px solid rgba(0,0,0,.08);
    box-shadow: 0 14px 32px rgba(0,0,0,.16);
    z-index:2;
    display:grid;
    place-items:center;
    padding:14px;
    text-align:center;
    font-weight:900;
    line-height:1.25;
  }

  /* âœ… Slower, more visible opening */
  .openEnvelope .seal{
    animation: sealPop 700ms ease forwards;
  }
  @keyframes sealPop{
    0%{transform:translateX(-50%) scale(1);opacity:1}
    55%{transform:translateX(-50%) scale(1.18);opacity:1}
    100%{transform:translateX(-50%) scale(.01);opacity:0}
  }

  .openEnvelope .flap{
    animation: flapOpen 1000ms cubic-bezier(.2,.9,.2,1) forwards;
  }
  @keyframes flapOpen{
    0%{transform: rotateX(0deg);}
    100%{transform: rotateX(72deg);}
  }

  .openEnvelope .letter{
    animation: letterRise 1200ms cubic-bezier(.2,.9,.2,1) forwards;
  }
  @keyframes letterRise{
    0%{transform: translateX(-50%) translateY(140px);}
    70%{transform: translateX(-50%) translateY(18px);}
    100%{transform: translateX(-50%) translateY(0px);}
  }

  .fadeOutCutscene{ animation: fadeOut 700ms ease forwards; }
  @keyframes fadeOut{ to{opacity:0;} }
</style>
</head>

<body>
  <main class="card" id="card">
    <div class="badge">ðŸ’Œ A very serious question</div>

    <section class="page active" id="pageQuestion">
      <div class="questionLine">
        <h1 id="questionTitle">Will you be my Valentine, Rasika?</h1>
        <span id="launchHeart" aria-hidden="true">ðŸ’˜</span>
      </div>

      <p class="sub" id="subtitle">
        Snacks, cozy vibes, and unreasonable affection guaranteed.
      </p>

      <div class="btnRow" id="arena">
        <button id="yes">Yes! ðŸ¥°</button>
        <button id="no">No ðŸ™ƒ</button>
      </div>
    </section>

    <section class="page" id="pageInvite">
      <div class="inviteWrap">
        <h1 id="winTitle">YAYYYYY ðŸ’–âœ¨ Valentine acquired. Now come here. ðŸ«¶</h1>

        <a class="photoWrap" href="couple.jpg?v=20" target="_blank" rel="noopener" aria-label="Open photo to save">
          <img src="couple.jpg?v=20" alt="Us ðŸ’–">
        </a>
        <div class="photoHint">Tap the photo to open & save it ðŸ’¾</div>

        <div class="success">
          <div class="inviteLine">
            ðŸ’– You are invited on Feb 13 to celebrate Valentines Date Night at Southern Hill Farms ðŸ’–
          </div>
          <p>Bring your warm hug and lovey dovey kissable face ðŸ’˜</p>
        </div>
      </div>
    </section>

    <div class="cutscene" id="cutscene" aria-hidden="true">
      <div class="cutsceneBackdrop"></div>

      <div class="arrowLayer" id="arrowLayer">
        <svg class="arrowSvg" viewBox="0 0 1000 600" preserveAspectRatio="none">
          <g id="arrowGroup">
            <line x1="0" y1="0" x2="220" y2="0" stroke="rgba(30,41,59,.9)" stroke-width="8" stroke-linecap="round"/>
            <polygon points="220,0 190,-18 190,18" fill="rgba(30,41,59,.9)"/>
            <polygon points="0,0 -26,-18 -20,0 -26,18" fill="rgba(255,77,109,.95)"/>
            <polygon points="-18,0 -44,-14 -38,0 -44,14" fill="rgba(255,77,109,.75)"/>
            <text x="120" y="10" font-size="32">ðŸ’˜</text>
          </g>
        </svg>
      </div>

      <div class="envelopeStage" id="envelopeStage">
        <div class="envelope" id="envelope">
          <div class="envBody"></div>
          <div class="letter">Sealed with love ðŸ’–<br/>Openingâ€¦</div>
          <div class="flap"></div>
          <div class="seal"><span>ðŸ’—</span></div>
        </div>
      </div>
    </div>
  </main>

<script>
  // No button behavior
  const noBtn = document.getElementById("no");
  const arena = document.getElementById("arena");
  let noIsActive = false;

  function activateNoTeleport(){
    if(noIsActive) return;
    noIsActive = true;
    const r = arena.getBoundingClientRect();
    const b = noBtn.getBoundingClientRect();
    noBtn.style.position = "absolute";
    noBtn.style.left = (b.left - r.left) + "px";
    noBtn.style.top  = (b.top  - r.top ) + "px";
  }
  function teleportNo(){
    if(!noIsActive) return;
    const r = arena.getBoundingClientRect();
    const b = noBtn.getBoundingClientRect();
    const maxX = r.width  - b.width  - 8;
    const maxY = r.height - b.height - 8;
    noBtn.style.left = (Math.random() * Math.max(0, maxX)) + "px";
    noBtn.style.top  = (Math.random() * Math.max(0, maxY)) + "px";
  }

  document.addEventListener("pointermove", (e)=>{
    if(e.pointerType === "mouse") activateNoTeleport();
  }, { once:true });

  arena.addEventListener("mousemove", (e)=>{
    if(!noIsActive) return;
    const b = noBtn.getBoundingClientRect();
    const bx = b.left + b.width/2;
    const by = b.top  + b.height/2;
    const dist = Math.hypot(bx - e.clientX, by - e.clientY);
    if(dist < 140) teleportNo();
  });

  noBtn.addEventListener("touchstart", (e)=>{
    activateNoTeleport(); teleportNo(); e.preventDefault();
  }, {passive:false});

  noBtn.addEventListener("click", (e)=>{
    activateNoTeleport(); teleportNo(); e.preventDefault();
  });

  // Cutscene
  const yesBtn = document.getElementById("yes");
  const cutscene = document.getElementById("cutscene");
  const arrowLayer = document.getElementById("arrowLayer");
  const heart = document.getElementById("launchHeart");
  const envelopeStage = document.getElementById("envelopeStage");
  const envelope = document.getElementById("envelope");
  const pageQuestion = document.getElementById("pageQuestion");
  const pageInvite = document.getElementById("pageInvite");

  function px(n){ return `${Math.round(n)}px`; }

  function setArrowVars(){
    const cardRect = document.getElementById("card").getBoundingClientRect();
    const heartRect = heart.getBoundingClientRect();

    const startX = (heartRect.left + heartRect.width/2) - cardRect.left;
    const startY = (heartRect.top  + heartRect.height/2) - cardRect.top;

    const midX = cardRect.width * 0.62;
    const midY = cardRect.height * 0.44;

    const endX = cardRect.width * 0.92;
    const endY = cardRect.height * 0.22;

    document.documentElement.style.setProperty("--ax0", px(startX));
    document.documentElement.style.setProperty("--ay0", px(startY));
    document.documentElement.style.setProperty("--ax1", px(midX));
    document.documentElement.style.setProperty("--ay1", px(midY));
    document.documentElement.style.setProperty("--ax2", px(endX));
    document.documentElement.style.setProperty("--ay2", px(endY));
  }

  function startCutscene(){
    heart.classList.add("heartWiggle");
    setTimeout(()=>heart.classList.remove("heartWiggle"), 2000);

    setArrowVars();
    cutscene.classList.add("show");

    arrowLayer.classList.add("arrowFly");

    // âœ… show envelope earlier and let it sit
    setTimeout(()=>{
      envelopeStage.classList.add("showEnvelope");
    }, 900);

    // âœ… open envelope slower
    setTimeout(()=>{
      envelope.classList.add("openEnvelope");
    }, 1900);

    // âœ… hold the open letter longer before switching pages
    setTimeout(()=>{
      cutscene.classList.add("fadeOutCutscene");

      setTimeout(()=>{
        cutscene.classList.remove("show","fadeOutCutscene");
        arrowLayer.classList.remove("arrowFly");
        envelopeStage.classList.remove("showEnvelope");
        envelope.classList.remove("openEnvelope");

        pageQuestion.classList.remove("active");
        pageInvite.classList.add("active");
        document.body.classList.add("yes-mode");
      }, 700);
    }, 3800); // total cutscene length ~3.8s
  }

  yesBtn.addEventListener("click", ()=>{
    yesBtn.disabled = true;
    startCutscene();
  });

  window.addEventListener("resize", ()=>{
    if(cutscene.classList.contains("show")) setArrowVars();
  });
</script>
</body>
</html>
